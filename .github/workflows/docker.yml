- name: Build Docker image
  run: |
    IMAGE_TAG=${GITHUB_SHA::8}
    docker build -t ${{ secrets.DOCKER_USERNAME }}/docker-cicd-project:$IMAGE_TAG .
    docker tag ${{ secrets.DOCKER_USERNAME }}/docker-cicd-project:$IMAGE_TAG ${{ secrets.DOCKER_USERNAME }}/docker-cicd-project:latest

- name: Log in to Docker Hub
  uses: docker/login-action@v2
  with:
    username: ${{ secrets.DOCKER_USERNAME }}
    password: ${{ secrets.DOCKER_PASSWORD }}

- name: Push Docker image
  run: |
    IMAGE_TAG=${GITHUB_SHA::8}
    docker push ${{ secrets.DOCKER_USERNAME }}/docker-cicd-project:$IMAGE_TAG
    docker push ${{ secrets.DOCKER_USERNAME }}/docker-cicd-project:latest

